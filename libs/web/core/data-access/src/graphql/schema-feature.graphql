fragment SchemaDetails on Schema {
  id
  createdAt
  updatedAt
  publishedAt
  stage
  name
}

fragment FieldDetails on Field {
  id
  createdAt
  updatedAt
  name
  description
  dataType
  isName
  isNullable
}

fragment KeyDetails on Key {
  id
  keyType
  isDrivingKey
  name
}

fragment OntologyDetails on Ontology {
  id
  key
  value
}

fragment ForeignKeyDetails on ForeignKey {
  id
  name
  relatedField {
    ...FieldDetails
  }
  relatedEntity {
    ...EntityDetails
  }
}

fragment EntityDetails on Entity {
  id
  createdAt
  updatedAt
  name
  description
  keys {
    ...KeyDetails
  }
  fields {
    ...FieldDetails
  }
  keywords
}

mutation CreateSchema($tenantId: String!, $input: CreateSchemaInput!) {
  createSchema(tenantId: $tenantId, input: $input) {
    ...SchemaDetails
  }
}

query Schemata($tenantId: String!) {
  schemata(tenantId: $tenantId) {
    ...SchemaDetails
  }
}

query Schema($schemaId: String!) {
  schema(schemaId: $schemaId) {
    ...SchemaDetails
    entities {
      ...EntityDetails
    }
  }
}
