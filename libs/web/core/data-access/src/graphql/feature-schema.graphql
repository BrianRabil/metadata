fragment SchemaDetails on Schema {
  id
  createdAt
  updatedAt
  publishedAt
  stage
  name
}

fragment FieldDetails on Field {
  id
  createdAt
  updatedAt
  name
  description
  dataType
  fieldType
  isName
  isNullable
}

fragment KeyDetails on Key {
  id
  keyType
  isDrivingKey
  name
}

fragment OntologyDetails on Ontology {
  id
  key
  value
}

fragment ForeignKeyDetails on ForeignKey {
  id
  name
  relatedField {
    ...FieldDetails
  }
  relatedEntity {
    ...EntitySummaryDetails
  }
}

fragment EntityDetails on Entity {
  id
  createdAt
  updatedAt
  name
  description
  keys {
    ...KeyDetails
  }
  fields {
    ...FieldDetails
  }
  keywords
}

fragment EntitySummaryDetails on EntitySummary {
  id
  createdAt
  updatedAt
  name
  description
}

query Schemata($tenantId: String!) {
  schemata(tenantId: $tenantId) {
    ...SchemaDetails
  }
}

query Schema($schemaId: String!) {
  schema(schemaId: $schemaId) {
    ...SchemaDetails
    entities {
      ...EntityDetails
    }
  }
}

query FieldDataTypes {
  fieldDataTypes {
    id
    data
    field
    name
    description
  }
}

mutation CreateSchema($tenantId: String!, $input: CreateSchemaInput!) {
  createSchema(tenantId: $tenantId, input: $input) {
    ...SchemaDetails
    entities {
      ...EntityDetails
    }
  }
}

mutation CreateSchemaEntity($schemaId: String!, $input: CreateSchemaEntityInput!) {
  createSchemaEntity(schemaId: $schemaId, input: $input) {
    ...EntityDetails
  }
}

mutation UpdateSchemaEntity($entityId: String!, $input: UpdateSchemaEntityInput!) {
  updateSchemaEntity(entityId: $entityId, input: $input) {
    ...EntityDetails
  }
}

mutation CreateEntityField($entityId: String!, $input: CreateSchemaEntityFieldInput!) {
  createEntityField(entityId: $entityId, input: $input) {
    ...FieldDetails
  }
}

mutation UpdateEntityField($fieldId: String!, $input: UpdateSchemaEntityFieldInput!) {
  updateEntityField(fieldId: $fieldId, input: $input) {
    ...FieldDetails
  }
}

mutation DeleteEntityField($fieldId: String!) {
  deleteEntityField(fieldId: $fieldId) {
    ...FieldDetails
  }
}
